% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reliability.R
\name{calc_omega}
\alias{calc_omega}
\title{Compute McDonald's Omega (total) via CFA}
\usage{
calc_omega(df, ordinal = FALSE)
}
\arguments{
\item{df}{A data frame or matrix with one row per observation and one column
per item.}

\item{ordinal}{Logical. If \code{TRUE}, fit an ordinal CFA (WLSMV) and compute
\eqn{\omega} on the latent-response scale; if \code{FALSE} (default), fit a
continuous CFA with MLR and FIML.}
}
\value{
A numeric scalar giving McDonald;s \eqn{\omega_\mathrm{total}}
(typically in [0, 1]; small estimation anomalies can yield values
slightly outside this range).
}
\description{
\code{calc_omega()} computes McDonald's \eqn{\omega_\mathrm{total}} for a
unidimensional scale using a one-factor confirmatory factor analysis
(CFA) fit with \strong{lavaan}. For continuous items, it uses MLR with FIML;
for ordinal items it uses WLSMV with listwise deletion and computes
\eqn{\omega} on the latent-response (\eqn{y^*}) metric.
}
\details{
The model is \code{f =~ item1 + item2 + ... + itemK} with \code{std.lv = TRUE}
(i.e., \eqn{\mathrm{Var}(f)=1}).
\itemize{
\item \strong{Continuous (\code{ordinal = FALSE})}: \eqn{\omega = \frac{(\sum_i \lambda_i)^2}
  {(\sum_i \lambda_i)^2 + \sum_i \theta_i}}, where \eqn{\lambda_i} are
\emph{unstandardized} loadings and \eqn{\theta_i} are \emph{unstandardized} residual
variances of the indicators.
\item \strong{Ordinal (\code{ordinal = TRUE})}: Uses WLSMV with indicators treated as
ordered; \eqn{\omega} is computed from the \emph{standardized-all} solution with
\eqn{\theta_i = 1 - \lambda_i^2} (each latent response has unit variance).
}

The function validates inputs and fails with informative messages if the CFA
does not converge or if implied residual variances are invalid. Mixed-sign
loadings trigger a warning (often indicates reverse-keying is needed).
}
\section{Missing data}{

For continuous items, FIML is used (\code{missing = "fiml"}). For ordinal items,
WLSMV in \strong{lavaan} uses listwise deletion.
}

\references{
\itemize{
\item McDonald, R. P. (1999). \emph{Test Theory: A Unified Treatment}. Lawrence
Erlbaum.
\item Green, S. B., & Yang, Y. (2009). Reliability of summed item scores using
structural equation modeling: An alternative to coefficient alpha.
\emph{Psychometrika, 74}(1), 155–167.
\item Zinbarg, R. E., Revelle, W., Yovel, I., & Li, W. (2005). Cronbach's α,
Revelle's β, and McDonald's ωH. \emph{Psychometrika, 70}(1), 123–133.
}
}
